
# Входное число для проверки
n = 13 # Пример числа для проверки
println("Проверка, является ли число $n простым")

# Шаг 1: Обработка малых случаев
if n < 2
    println("Число является составным")
elseif n == 2 || n == 3
    println("Число является простым")
elseif n % 2 == 0
    println("Число является составным")
else
    # Шаг 2: Выбор случайного целого числа a, такого что 2 ≤ a ≤ n - 2
    a = rand(2:n-2)
    println("Случайно выбранное a = $a")
    
    # Шаг 3: Вычисление r = a^(n-1) % n (модульное возведение в степень)
    local r = 1  # Объявление r как локальной переменной
    local exp = n - 1  # Переименовываем `exponent` в `exp` для избежания конфликта
    local base = a % n  # Объявление base как локальной переменной
    while exp > 0
        if exp % 2 == 1
            r = (r * base) % n
        end
        exp = div(exp, 2)  # Делим exp на 2
        base = (base * base) % n
    end
    
    # Шаг 4: Проверка, что r ≠ 1
    if r != 1
        println("Число $n является составным")
    else
        println("Число $n вероятно простое")
    end
end

